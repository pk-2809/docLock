<div class="fixed inset-0 z-[100] flex items-end justify-center bg-black/40 backdrop-blur-sm animate-fade-in"
    (click)="onCancel()">
    <div class="w-full max-w-md bg-white rounded-t-[2.5rem] p-8 pb-10 shadow-[0_-10px_40px_rgba(0,0,0,0.1)] animate-slide-in-up relative overflow-hidden"
        (click)="$event.stopPropagation()">

        <!-- Handle Bar -->
        <div class="w-12 h-1.5 bg-slate-200 rounded-full mx-auto mb-8"></div>

        <div class="flex flex-col items-center text-center relative z-10">

            <!-- Image (if available) -->
            @if (image) {
            <div
                class="w-24 h-24 rounded-full p-1 bg-indigo-100 flex items-center justify-center mb-6 shadow-sm">
                <img [src]="image" class="w-full h-full rounded-full object-cover border-4 border-white shadow-sm">
            </div>
            }

            <!-- Icons (if no image) -->
            @if (!image) {
            <!-- Danger / Delete -->
            @if (type === 'danger') {
            <div
                class="w-20 h-20 rounded-[1.5rem] bg-red-50 border border-red-100 flex items-center justify-center text-red-500 mb-6 shadow-sm">
                <svg class="w-10 h-10" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
                        d="M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0" />
                </svg>
            </div>
            }

            <!-- Profile / Add Friend -->
            @if (type === 'profile') {
            <div
                class="w-20 h-20 rounded-[1.5rem] bg-indigo-50 border border-indigo-100 flex items-center justify-center text-indigo-600 mb-6 shadow-sm">
                <svg class="w-10 h-10" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
                        d="M19 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 11-6.75 0 3.375 3.375 0 016.75 0zM4 19.235v-.11a6.375 6.375 0 0112.75 0v.109A12.318 12.318 0 0110.374 21c-2.331 0-4.512-.645-6.374-1.766z" />
                </svg>
            </div>
            }

            <!-- Info / Default -->
            @if (type !== 'danger' && type !== 'profile') {
            <div
                class="w-20 h-20 rounded-[1.5rem] bg-indigo-50 border border-indigo-100 flex items-center justify-center text-indigo-500 mb-6 shadow-sm">
                <svg class="w-10 h-10" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
                        d="M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z" />
                </svg>
            </div>
            }
            }

            <h3 class="text-2xl font-bold text-slate-800 mb-2 tracking-tight">{{ title }}</h3>
            <!-- Message with HTML support for highlighting -->
            <div class="text-slate-500 text-sm mb-8 leading-relaxed px-4 text-pretty" [innerHTML]="message"></div>

            <div class="flex flex-col w-full gap-3">
                <button (click)="onConfirm()" [ngClass]="{
                        'bg-[#FF4545] hover:bg-[#E63E3E] text-white shadow-[0_10px_25px_rgba(255,69,69,0.3)] hover:shadow-[0_15px_35px_rgba(255,69,69,0.4)]': type === 'danger',
                        'bg-[#FF2D88] hover:bg-[#E61E70] text-white shadow-[0_10px_25px_rgba(255,45,136,0.3)] hover:shadow-[0_15px_35px_rgba(255,45,136,0.4)]': type === 'profile',
                        'bg-indigo-500 hover:bg-indigo-600 shadow-indigo-200 text-white': type === 'info' || type === 'warning'
                    }" [disabled]="isLoading"
                    class="w-full h-14 rounded-2xl font-bold text-base text-white shadow-lg transition-all active:scale-[98%] hover:shadow-xl flex items-center justify-center relative overflow-hidden group disabled:opacity-70 disabled:cursor-not-allowed">
                    <div
                        class="absolute inset-0 bg-white/20 transform -skew-x-12 -translate-x-full group-hover:animate-shine">
                    </div>
                    @if (!isLoading) {
                    <span class="relative">{{ confirmText }}</span>
                    }
                    @if (isLoading) {
                    <div class="relative w-6 h-6 border-2 border-white/30 border-t-white rounded-full animate-spin">
                    </div>
                    }
                </button>

                <button (click)="onCancel()"
                    class="w-full h-14 rounded-2xl font-bold text-slate-500 bg-slate-50 hover:bg-slate-100 hover:text-slate-700 transition-colors">
                    {{ cancelText }}
                </button>
            </div>
        </div>
    </div>
</div>