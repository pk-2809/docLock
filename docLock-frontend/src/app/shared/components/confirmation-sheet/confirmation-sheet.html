<div class="fixed inset-0 z-[100] flex items-end justify-center bg-black/40 backdrop-blur-sm animate-fade-in"
    (click)="onCancel()">
    <div class="w-full max-w-md bg-white rounded-t-[2.5rem] p-8 pb-10 shadow-[0_-10px_40px_rgba(0,0,0,0.1)] animate-slide-in-up relative overflow-hidden"
        (click)="$event.stopPropagation()">

        <!-- Handle Bar -->
        <div class="w-12 h-1.5 bg-slate-200 rounded-full mx-auto mb-8"></div>

        <div class="flex flex-col items-center text-center relative z-10">

            <!-- Image (if available) -->
            @if (image) {
            <div
                class="w-24 h-24 rounded-full p-1 bg-gradient-to-br from-indigo-100 to-violet-100 flex items-center justify-center mb-6 shadow-sm">
                <img [src]="image" class="w-full h-full rounded-full object-cover border-4 border-white shadow-sm">
            </div>
            }

            <!-- Icons (if no image) -->
            @if (!image) {
            <!-- Danger / Delete -->
            @if (type === 'danger') {
            <div
                class="w-20 h-20 rounded-[1.5rem] bg-red-50 border border-red-100 flex items-center justify-center text-red-500 mb-6 shadow-sm">
                <svg class="w-10 h-10" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16">
                    </path>
                </svg>
            </div>
            }

            <!-- Profile / Add Friend -->
            @if (type === 'profile') {
            <div
                class="w-20 h-20 rounded-[1.5rem] bg-indigo-50 border border-indigo-100 flex items-center justify-center text-indigo-600 mb-6 shadow-sm">
                <svg class="w-10 h-10" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z">
                    </path>
                </svg>
            </div>
            }

            <!-- Info / Default -->
            @if (type !== 'danger' && type !== 'profile') {
            <div
                class="w-20 h-20 rounded-[1.5rem] bg-indigo-50 border border-indigo-100 flex items-center justify-center text-indigo-500 mb-6 shadow-sm">
                <svg class="w-10 h-10" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                </svg>
            </div>
            }
            }

            <h3 class="text-2xl font-bold text-slate-800 mb-2 tracking-tight">{{ title }}</h3>
            <!-- Message with HTML support for highlighting -->
            <div class="text-slate-500 text-sm mb-8 leading-relaxed px-4 text-pretty" [innerHTML]="message"></div>

            <div class="flex flex-col w-full gap-3">
                <button (click)="onConfirm()" [ngClass]="{
                        'bg-[#FF4545] hover:bg-[#E63E3E] text-white shadow-[0_10px_25px_rgba(255,69,69,0.3)] hover:shadow-[0_15px_35px_rgba(255,69,69,0.4)]': type === 'danger',
                        'bg-[#FF2D88] hover:bg-[#E61E70] text-white shadow-[0_10px_25px_rgba(255,45,136,0.3)] hover:shadow-[0_15px_35px_rgba(255,45,136,0.4)]': type === 'profile',
                        'bg-gradient-to-r from-indigo-500 to-violet-500 shadow-indigo-200 text-white': type === 'info' || type === 'warning'
                    }" [disabled]="isLoading"
                    class="w-full h-14 rounded-2xl font-bold text-base shadow-lg transition-all active:scale-[98%] hover:shadow-xl flex items-center justify-center relative overflow-hidden group disabled:opacity-70 disabled:cursor-not-allowed">
                    <div
                        class="absolute inset-0 bg-white/20 transform -skew-x-12 -translate-x-full group-hover:animate-shine">
                    </div>
                    @if (!isLoading) {
                    <span class="relative">{{ confirmText }}</span>
                    }
                    @if (isLoading) {
                    <div class="relative w-6 h-6 border-2 border-white/30 border-t-white rounded-full animate-spin">
                    </div>
                    }
                </button>

                <button (click)="onCancel()"
                    class="w-full h-14 rounded-2xl font-bold text-slate-500 bg-slate-50 hover:bg-slate-100 hover:text-slate-700 transition-colors">
                    {{ cancelText }}
                </button>
            </div>
        </div>
    </div>
</div>